<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>بث كورة مباشر - البث المباشر للمباريات</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --bg1: #0f0c29; 
      --bg2: #302b63; 
      --bg3: #24243e;
      --text: #fff;
      --glass: rgba(255,255,255,0.08); 
      --accent: #5D5CDE;
      --accent-hover: #4a49c7;
      --radius: 14px; 
      --transition: .35s cubic-bezier(.4,.2,.2,1);
      --shadow: 0 30px 80px -20px rgba(0,0,0,0.5);
      --border: rgba(255,255,255,0.15);
    }
    
    [data-theme="light"] {
      --bg1: #f8fafc; 
      --bg2: #e2e8f0; 
      --bg3: #cbd5e1;
      --text: #1e293b;
      --glass: rgba(255,255,255,0.8);
      --border: rgba(0,0,0,0.1);
      --shadow: 0 20px 60px -10px rgba(0,0,0,0.15);
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }
    
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      color: var(--text); 
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      transition: background var(--transition);
      padding: 10px 15px 100px;
      position: relative;
    }
    
    /* Dark mode detection */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg1: #0f0c29; 
        --bg2: #302b63;
        --text: #fff;
        --glass: rgba(255,255,255,0.08);
      }
    }
    
    audio { display: none; }
    
    .topbar {
      max-width: 1200px; 
      margin: 12px auto 20px;
      display: flex; 
      flex-wrap: wrap;
      align-items: center; 
      justify-content: space-between;
      gap: 15px;
    }
    
    .logo {
      display: flex; 
      align-items: center; 
      gap: 10px;
      font-size: 1.5rem; 
      font-weight: 700;
      padding: 14px 24px; 
      background: var(--glass);
      border-radius: 50px; 
      backdrop-filter: blur(20px);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: var(--transition);
    }
    
    .logo:hover {
      transform: translateY(-2px);
      box-shadow: 0 35px 90px -20px rgba(93, 92, 222, 0.4);
    }
    
    .logo i { 
      color: var(--accent); 
      margin-left: 8px; 
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .search-wrapper {
      position: relative; 
      flex: 1; 
      min-width: 250px; 
      max-width: 600px;
    }
    
    .search-wrapper input {
      width: 100%; 
      padding: 16px 55px 16px 20px;
      border: none; 
      border-radius: 50px;
      background: var(--glass); 
      color: var(--text);
      font-size: 16px; 
      outline: none; 
      backdrop-filter: blur(20px);
      transition: var(--transition);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .search-wrapper input:focus {
      box-shadow: 0 20px 70px -10px rgba(93, 92, 222, 0.4);
      border-color: var(--accent);
    }
    
    .search-wrapper i {
      position: absolute; 
      right: 18px; 
      top: 50%;
      transform: translateY(-50%);
      font-size: 18px; 
      color: var(--accent);
    }
    
    .actions {
      display: flex; 
      gap: 12px; 
      align-items: center; 
      flex-wrap: wrap;
    }
    
    .btn {
      cursor: pointer; 
      border: none; 
      padding: 12px 20px;
      border-radius: 50px; 
      font-size: 14px; 
      font-weight: 600;
      background: var(--glass); 
      color: var(--text);
      display: inline-flex; 
      align-items: center; 
      gap: 8px;
      backdrop-filter: blur(20px); 
      transition: var(--transition);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .btn:hover {
      transform: translateY(-2px);
      background: var(--accent);
      color: white;
      box-shadow: 0 25px 70px -5px rgba(93, 92, 222, 0.5);
    }
    
    .stats {
      max-width: 1200px;
      margin: 0 auto 30px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    
    .stat-card {
      background: var(--glass);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      backdrop-filter: blur(20px);
      text-align: center;
      transition: var(--transition);
    }
    
    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow);
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent);
      display: block;
    }
    
    .stat-label {
      font-size: 14px;
      opacity: 0.8;
      margin-top: 5px;
    }
    
    .categories {
      max-width: 1200px; 
      margin: 0 auto 40px;
      display: grid; 
      gap: 25px;
    }
    
    .category {
      background: var(--glass); 
      border: 1px solid var(--border);
      border-radius: 20px; 
      padding: 25px 20px 20px;
      backdrop-filter: blur(20px); 
      box-shadow: var(--shadow);
      display: flex; 
      flex-direction: column; 
      gap: 18px;
      position: relative; 
      overflow: hidden;
      transition: var(--transition);
    }
    
    .category:hover {
      transform: translateY(-2px);
      box-shadow: 0 40px 100px -20px rgba(93, 92, 222, 0.3);
    }
    
    .category h2 {
      margin: 0; 
      font-size: 1.4rem;
      display: flex; 
      align-items: center; 
      gap: 12px;
      position: relative;
    }
    
    .category h2 i { 
      color: var(--accent); 
      font-size: 1.2rem;
    }
    
    .category h2::after {
      content: '';
      position: absolute;
      bottom: -8px;
      right: 0;
      height: 2px;
      width: 50px;
      background: var(--accent);
      border-radius: 2px;
    }
    
    .channels {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
      gap: 20px;
    }
    
    .channel {
      background: rgba(255,255,255,0.05); 
      border-radius: 16px;
      padding: 16px 12px 18px; 
      position: relative;
      cursor: pointer; 
      display: flex; 
      flex-direction: column;
      align-items: center; 
      gap: 12px;
      transition: var(--transition);
      border: 1px solid var(--border);
      backdrop-filter: blur(10px);
      overflow: hidden;
    }
    
    .channel::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent-hover));
      transform: scaleX(0);
      transition: var(--transition);
    }
    
    .channel:hover::before {
      transform: scaleX(1);
    }
    
    .channel img {
      width: 75px; 
      height: 75px; 
      object-fit: contain;
      border-radius: 12px; 
      background: rgba(255,255,255,0.08);
      padding: 8px; 
      flex-shrink: 0;
      transition: var(--transition);
    }
    
    .channel:hover img {
      transform: scale(1.1);
    }
    
    .channel-name {
      font-size: 14px; 
      font-weight: 600;
      text-align: center; 
      line-height: 1.2;
      overflow: hidden;
      text-overflow: ellipsis; 
      width: 100%;
    }
    
    .channel .badge {
      position: absolute; 
      top: 10px; 
      left: 10px;
      background: var(--accent); 
      padding: 5px 12px;
      font-size: 10px; 
      border-radius: 20px;
      text-transform: uppercase; 
      font-weight: 700;
      letter-spacing: 0.5px;
      color: white;
    }
    
    .channel .status-indicator {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 12px;
      height: 12px;
      background: #10b981;
      border-radius: 50%;
      border: 2px solid white;
      animation: pulse-dot 2s infinite;
    }
    
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .channel:hover {
      transform: translateY(-5px);
      box-shadow: 0 40px 100px -15px rgba(93, 92, 222, 0.4);
      background: rgba(255,255,255,0.1);
    }
    
    .no-results {
      text-align: center; 
      padding: 60px 20px;
      font-size: 18px; 
      opacity: 0.8;
      background: var(--glass);
      border-radius: 20px;
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
    }
    
    .no-results i {
      font-size: 3rem;
      color: var(--accent);
      margin-bottom: 15px;
      display: block;
    }
    
    #playerModal {
      position: fixed; 
      inset: 0; 
      display: none;
      justify-content: center; 
      align-items: center;
      padding: 20px; 
      z-index: 9999;
      backdrop-filter: blur(20px);
      background: rgba(0,0,0,0.9);
      flex-direction: column; 
      gap: 20px;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-container {
      width: 100%; 
      max-width: 1000px;
      display: flex; 
      flex-direction: column; 
      gap: 20px;
      animation: slideUp 0.3s ease;
    }
    
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .modal-header {
      display: flex; 
      justify-content: space-between;
      align-items: center; 
      gap: 15px; 
      flex-wrap: wrap;
      background: var(--glass);
      padding: 20px;
      border-radius: 16px;
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
    }
    
    .now-playing {
      display: flex; 
      align-items: center; 
      gap: 12px;
      font-weight: 700; 
      font-size: 18px;
    }
    
    .now-playing i {
      color: var(--accent);
      animation: pulse 2s infinite;
    }
    
    .video-wrapper {
      position: relative; 
      width: 100%; 
      aspect-ratio: 16/9;
      background: #000; 
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 50px 120px -20px rgba(0,0,0,0.8);
      display: flex; 
      align-items: center; 
      justify-content: center;
      border: 3px solid var(--accent);
    }
    
    video {
      width: 100%; 
      height: 100%; 
      object-fit: contain;
      border-radius: 12px;
    }
    
    .controls-group {
      display: flex; 
      gap: 15px; 
      flex-wrap: wrap;
    }
    
    .action-btn {
      border: none; 
      padding: 12px 20px;
      border-radius: 50px; 
      font-weight: 600;
      cursor: pointer;
      background: var(--accent);
      color: #fff; 
      display: inline-flex;
      align-items: center; 
      gap: 8px; 
      font-size: 14px;
      transition: var(--transition);
      box-shadow: 0 10px 30px -5px rgba(93, 92, 222, 0.4);
    }
    
    .action-btn:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 15px 40px -5px rgba(93, 92, 222, 0.6);
    }
    
    .action-btn:active { 
      transform: translateY(0); 
    }
    
    .loader {
      position: absolute; 
      inset: 0;
      display: flex; 
      flex-direction: column;
      justify-content: center; 
      align-items: center;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      color: #fff; 
      font-size: 16px; 
      gap: 15px;
    }
    
    .loader i {
      font-size: 2.5rem;
      color: var(--accent);
    }
    
    .footer {
      text-align: center; 
      padding: 30px 20px;
      margin-top: 60px; 
      font-size: 13px; 
      opacity: 0.8;
      max-width: 1000px; 
      margin-left: auto;
      margin-right: auto;
      background: var(--glass);
      border-radius: 20px;
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
    }
    
    .footer .social-links {
      margin: 15px 0; 
      display: flex;
      justify-content: center; 
      gap: 20px;
    }
    
    .footer .social-links a {
      font-size: 24px; 
      color: var(--text);
      transition: var(--transition);
      padding: 10px;
      border-radius: 50%;
      background: var(--glass);
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .footer .social-links a:hover {
      transform: translateY(-3px);
      color: var(--accent);
      box-shadow: 0 10px 30px -5px rgba(93, 92, 222, 0.4);
    }
    
    .filter-tabs {
      max-width: 1200px;
      margin: 0 auto 30px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .filter-tab {
      padding: 10px 20px;
      border: none;
      background: var(--glass);
      color: var(--text);
      border-radius: 25px;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
      border: 1px solid var(--border);
    }
    
    .filter-tab.active,
    .filter-tab:hover {
      background: var(--accent);
      color: white;
      transform: translateY(-2px);
    }
    
    @media (max-width: 1024px) {
      .channel img { 
        width: 65px; 
        height: 65px; 
      }
      .channels {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .categories { 
        gap: 20px; 
      }
      .topbar { 
        flex-direction: column; 
        align-items: stretch; 
        gap: 15px;
      }
      .logo { 
        margin-bottom: 10px;
        justify-content: center;
      }
      .modal-header {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
      }
      .controls-group {
        justify-content: center;
      }
      .stats {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
    }
    
    @media (max-width: 480px) {
      .channel img { 
        width: 55px; 
        height: 55px; 
      }
      .channels {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        gap: 15px;
      }
      body {
        padding: 10px 10px 80px;
      }
    }
  </style>
</head>
<body data-theme="dark">

  <div class="topbar">
    <div class="logo">
      <i class="fas fa-futbol"></i> 
      بث كورة مباشر
    </div>
    <div class="search-wrapper">
      <input id="searchInput" placeholder="ابحث عن قناة أو فئة..." />
      <i class="fas fa-search"></i>
    </div>
    <div class="actions">
      <button class="btn" id="refreshBtn">
        <i class="fas fa-sync-alt"></i> تحديث
      </button>
      <button class="btn" id="themeToggle">
        <i class="fas fa-moon"></i> تبديل الوضع
      </button>
    </div>
  </div>

  <div class="stats">
    <div class="stat-card">
      <span class="stat-number" id="totalChannels">0</span>
      <div class="stat-label">إجمالي القنوات</div>
    </div>
    <div class="stat-card">
      <span class="stat-number" id="totalCategories">0</span>
      <div class="stat-label">الفئات المتاحة</div>
    </div>
    <div class="stat-card">
      <span class="stat-number" id="liveChannels">0</span>
      <div class="stat-label">البث المباشر</div>
    </div>
  </div>

  <div class="filter-tabs" id="filterTabs"></div>

  <div id="content" class="categories"></div>

  <div id="playerModal">
    <div class="modal-container">
      <div class="modal-header">
        <div class="now-playing">
          <i class="fas fa-broadcast-tower"></i> 
          <div id="nowPlayingText">جارٍ التحميل...</div>
        </div>
        <div class="controls-group">
          <button class="action-btn" id="fullscreenBtn">
            <i class="fas fa-expand"></i> ملء الشاشة
          </button>
          <button class="action-btn" id="closeBtn">
            <i class="fas fa-times"></i> إغلاق
          </button>
        </div>
      </div>
      <div class="video-wrapper">
        <div class="loader" id="videoLoader">
          <div><i class="fas fa-spinner fa-spin"></i></div>
          <div>جارٍ الاتصال بالبث المباشر...</div>
        </div>
        <video id="videoPlayer" playsinline controls></video>
      </div>
    </div>
  </div>

  <div class="footer">
    <div>
      © <span id="year"></span> بث كورة مباشر - جميع الحقوق محفوظة
    </div>
    <div style="margin: 10px 0; font-size: 12px; opacity: 0.7;">
      منصة البث المباشر الأولى للمباريات العربية
    </div>
    <div class="social-links">
      <a href="https://twitter.com/yourTwitter" target="_blank" aria-label="Twitter">
        <i class="fab fa-x-twitter"></i>
      </a>
      <a href="https://www.instagram.com/me_do6231?igsh=ZWplMGZsN2ZsbTg4&utm_source=qr" target="_blank" aria-label="Instagram">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="https://t.me/ei_5m" target="_blank" aria-label="Telegram">
        <i class="fab fa-telegram"></i>
      </a>
      <a href="https://t.snapchat.com/uhojCMoz" target="_blank" aria-label="Snapchat">
        <i class="fab fa-snapchat-ghost"></i>
      </a>
    </div>
  </div>

  <script>
    // Dark mode detection and theme management
    const themeToggle = document.getElementById("themeToggle");
    let currentTheme = 'dark';
    
    // Detect user's preferred color scheme
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute('data-theme', 'dark');
      currentTheme = 'dark';
    } else {
      document.documentElement.setAttribute('data-theme', 'light');
      currentTheme = 'light';
    }
    
    // Listen for changes in color scheme preference
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
      if (event.matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
        currentTheme = 'dark';
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
        currentTheme = 'light';
      }
      updateThemeButton();
    });
    
    function updateThemeButton() {
      const isLight = currentTheme === 'light';
      themeToggle.innerHTML = `<i class="fas ${isLight ? "fa-sun" : "fa-moon"}"></i> تبديل الوضع`;
    }
    
    themeToggle.addEventListener("click", () => {
      currentTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute("data-theme", currentTheme);
      updateThemeButton();
    });
    
    updateThemeButton();
    document.getElementById("year").textContent = new Date().getFullYear();

    // Channel data with enhanced information
    const channels = [
      { "name": "beIN SPORTS HD1", "url": "https://stream.sainaertebat.com/hls2/bein1.m3u8", "logo": "https://jzu4.github.io/files/img/IMG_6703.png", "category": "BeIN Sports", "live": true },
      { "name": "beIN SPORTS HD2", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/38_.m3u8", "logo": "https://jzu4.github.io/files/img/IMG_6703.png", "category": "BeIN Sports", "live": true },
      { "name": "beIN SPORTS HD3", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/250_.m3u8", "logo": "https://jzu4.github.io/files/img/IMG_6703.png", "category": "BeIN Sports", "live": true },
      { "name": "beIN SPORTS HD4", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/251_.m3u8", "logo": "https://jzu4.github.io/files/img/IMG_6703.png", "category": "BeIN Sports", "live": true },
      { "name": "beIN SPORTS HD5", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/252_.m3u8", "logo": "https://jzu4.github.io/files/img/IMG_6703.png", "category": "BeIN Sports", "live": true },
      { "name": "SSC 1", "url": "https://stream.sainaertebat.com/hls2/ssc1.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "SSC 2", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/163_.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "SSC 3", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/147_.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "SSC 4", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/178_.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "SSC 5", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/179_.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "SSC Extra1", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/193_.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "SSC Extra2", "url": "https://cdn1-europe.mgmlcdn.s-cloudflare.com:25463/xH5gc4mOg8vw4txxz36/226_.m3u8", "logo": "https://jzu4.github.io/files/img/504D5767-2196-4154-8F97-58961653DCB7.png", "category": "SSC", "live": true },
      { "name": "ON Sports", "url": "https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8", "logo": "https://via.placeholder.com/80x80/5D5CDE/ffffff?text=ON", "category": "ON Sports", "live": true },
      { "name": "السعودية الأولى", "url": "https://cdn-globecast.akamaized.net/live/eds/saudi_tv/hls_roku/index.m3u8", "logo": "https://i.imgur.com/GRQTndk.png", "category": "Saudi Arabia", "live": true },
      { "name": "السعودية الثانية", "url": "https://shd-gcp-live.edgenextcdn.net/live/bitmovin-ksa-now/71ed3aa814c643306c0a8bc4fcc7d17f/index.m3u8", "logo": "https://i.imgur.com/sEOjApe.png", "category": "Saudi Arabia", "live": true },
      { "name": "SBC", "url": "https://shd-gcp-live.edgenextcdn.net/live/bitmovin-sbc/90e09c28db26435799b4a14892a167/index.m3u8", "logo": "https://i.imgur.com/9JSQglj.png", "category": "Saudi Arabia", "live": true },
      { "name": "ذكريات", "url": "https://al-ekhbaria-prod-dub.shahid.net/out/v1/ef87956651694f4ba2ccc16e852dbb95/index.m3u8", "logo": "https://i.imgur.com/AKa1X9d.png", "category": "Saudi Arabia", "live": true },
      { "name": "الأخبارية", "url": "https://cdn-globecast.akamaized.net/live/eds/al_ekhbariya/hls_roku/index.m3u8", "logo": "https://i.imgur.com/WcRlHQm.png", "category": "Saudi Arabia", "live": true },
      { "name": "القرآن الكريم", "url": "http://m.live.net.sa:1935/live/quran/gmswf.m3u8", "logo": "https://i.imgur.com/A2fJysM.png", "category": "Saudi Arabia", "live": true },
      { "name": "السنة النبوية", "url": "http://m.live.net.sa:1935/live/sunnah/playlist.m3u8", "logo": "https://i.imgur.com/S6LcTJv.png", "category": "Saudi Arabia", "live": true },
      { "name": "اقرأ", "url": "https://playlist.fasttvcdn.com/pl/dlkqw1ftuvuuzkcb4pxdcg/Iqraafasttv3/playlist.m3u8", "logo": "https://i.imgur.com/HPVsIa4.png", "category": "Saudi Arabia", "live": true },
      { "name": "الثقافية", "url": "https://thaqafeyyah-ak.akamaized.net/out/v1/f6851f68ada94f82ae6b64a441eb5ab1/index.m3u8", "logo": "https://i.imgur.com/juM3k8B.jpg", "category": "Saudi Arabia", "live": true },
      { "name": "الحدث", "url": "https://av.alarabiya.net/alarabiapublish/alhadath.smil/playlist.m3u8", "logo": "https://i.imgur.com/De4SEWE.png", "category": "Saudi Arabia", "live": true },
      { "name": "خليجي", "url": "https://shls-live-enc.edgenextcdn.net/out/v1/0afd546fcb5342f69d6bfff2dd1596e9/index_20.m3u8", "logo": "https://jzu4.github.io/files/img/A06BD3B9-B28A-48B6-8691-44A8E6FA41CD.png", "category": "Shahid", "live": true },
      { "name": "باب الحارة", "url": "https://shls-live-enc.edgenextcdn.net/out/v1/948c54279b594944adde578c95f1d7d1/index.m3u8", "logo": "https://i.imgur.com/QtlnZbq.png", "category": "Shahid", "live": true },
      { "name": "MBC 1", "url": "https://mbc1na-prod-dub-enc.edgenextcdn.net/out/v1/84ab37e99d6e4b16b33c6600f94f6ccb/index_6.m3u8", "logo": "https://jzu4.github.io/files/img/C6630DD3-4242-B800-38FB40DE2BA2.png", "category": "MBC", "live": true }
    ];

    // Group channels by category
    const grouped = {};
    channels.forEach(c => {
      if (!grouped[c.category]) grouped[c.category] = [];
      grouped[c.category].push(c);
    });

    // DOM elements
    const content = document.getElementById("content");
    const searchInput = document.getElementById("searchInput");
    const playerModal = document.getElementById("playerModal");
    const video = document.getElementById("videoPlayer");
    const nowPlaying = document.getElementById("nowPlayingText");
    const videoLoader = document.getElementById("videoLoader");
    const closeBtn = document.getElementById("closeBtn");
    const fullscreenBtn = document.getElementById("fullscreenBtn");
    const refreshBtn = document.getElementById("refreshBtn");
    const filterTabs = document.getElementById("filterTabs");
    
    let hls = null;
    let currentFilter = 'all';

    // Update statistics
    function updateStats() {
      document.getElementById("totalChannels").textContent = channels.length;
      document.getElementById("totalCategories").textContent = Object.keys(grouped).length;
      document.getElementById("liveChannels").textContent = channels.filter(c => c.live).length;
    }

    // Create filter tabs
    function createFilterTabs() {
      const categories = ['all', ...Object.keys(grouped)];
      filterTabs.innerHTML = '';
      
      categories.forEach(cat => {
        const tab = document.createElement('button');
        tab.className = `filter-tab ${cat === currentFilter ? 'active' : ''}`;
        tab.textContent = cat === 'all' ? 'جميع القنوات' : cat;
        tab.onclick = () => {
          currentFilter = cat;
          document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          renderChannels();
        };
        filterTabs.appendChild(tab);
      });
    }

    // Render channels
    function renderChannels() {
      content.innerHTML = "";
      
      const categoriesToShow = currentFilter === 'all' ? Object.keys(grouped) : [currentFilter];
      
      categoriesToShow.forEach(cat => {
        if (!grouped[cat]) return;
        
        const section = document.createElement("div");
        section.className = "category";
        section.dataset.category = cat;
        
        const h2 = document.createElement("h2");
        h2.innerHTML = `<i class="fas fa-${getIcon(cat)}"></i> ${cat} <span style="margin-left:8px;font-size:14px;color:rgba(255,255,255,0.7);">(${grouped[cat].length})</span>`;
        section.appendChild(h2);
        
        const wrapper = document.createElement("div");
        wrapper.className = "channels";
        
        grouped[cat].forEach(ch => {
          const card = document.createElement("div");
          card.className = "channel";
          card.dataset.name = ch.name.toLowerCase();
          card.dataset.category = ch.category;
          card.innerHTML = `
            <div class="badge">${ch.category}</div>
            ${ch.live ? '<div class="status-indicator"></div>' : ''}
            <img loading="lazy" src="${ch.logo}" alt="${ch.name}" onerror="this.src='https://via.placeholder.com/80x80/5D5CDE/ffffff?text=Logo'"/>
            <div class="channel-name">${ch.name}</div>
          `;
          card.onclick = () => playChannel(ch);
          wrapper.appendChild(card);
        });
        
        section.appendChild(wrapper);
        content.appendChild(section);
      });
      
      applySearch();
    }

    // Get category icon
    function getIcon(cat) {
      const icons = {
        "BeIN Sports": "football-ball",
        "SSC": "tv",
        "ON Sports": "tv",
        "Saudi Arabia": "flag",
        "Shahid": "play-circle",
        "MBC": "play-circle"
      };
      return icons[cat] || "globe";
    }

    // Search functionality
    searchInput.addEventListener("input", applySearch);
    function applySearch() {
      const term = searchInput.value.trim().toLowerCase();
      let hasResults = false;
      
      document.querySelectorAll(".channel").forEach(ch => {
        const name = ch.dataset.name;
        const cat = ch.dataset.category.toLowerCase();
        if (name.includes(term) || cat.includes(term)) {
          ch.style.display = "";
          hasResults = true;
        } else {
          ch.style.display = "none";
        }
      });

      // Hide empty categories
      document.querySelectorAll(".category").forEach(cat => {
        const visibleChannels = cat.querySelectorAll(".channel[style=''], .channel:not([style])");
        cat.style.display = visibleChannels.length > 0 ? "" : "none";
      });
      
      // Show no results message
      document.querySelectorAll(".no-results").forEach(n => n.remove());
      if (!hasResults && term) {
        const msg = document.createElement("div");
        msg.className = "no-results";
        msg.innerHTML = `
          <i class="fas fa-search"></i>
          <div>لم يتم العثور على قنوات تطابق "${term}"</div>
          <div style="font-size: 14px; margin-top: 10px; opacity: 0.7;">جرب البحث بكلمات مختلفة</div>
        `;
        content.appendChild(msg);
      }
    }

    // Play channel function
    function playChannel(ch) {
      nowPlaying.textContent = ch.name;
      videoLoader.style.display = "flex";
      
      if (hls) {
        hls.destroy();
        hls = null;
      }
      
      video.pause();
      video.src = "";
      playerModal.style.display = "flex";
      
      setTimeout(() => {
        if (Hls.isSupported()) {
          hls = new Hls({
            enableWorker: true,
            lowLatencyMode: true,
            backBufferLength: 90
          });
          
          hls.loadSource(ch.url);
          hls.attachMedia(video);
          
          hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play().catch(() => {});
            videoLoader.style.display = "none";
          });
          
          hls.on(Hls.Events.ERROR, (event, data) => {
            console.error('HLS error:', data);
            videoLoader.innerHTML = `
              <div><i class="fas fa-exclamation-triangle"></i></div>
              <div>فشل في تحميل البث</div>
              <div style="font-size: 14px; opacity: 0.7;">تحقق من اتصال الإنترنت وحاول مرة أخرى</div>
            `;
          });
        } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
          video.src = ch.url;
          video.addEventListener("loadedmetadata", () => {
            video.play().catch(() => {});
            videoLoader.style.display = "none";
          }, { once: true });
        } else {
          videoLoader.innerHTML = `
            <div><i class="fas fa-times-circle"></i></div>
            <div>المتصفح غير مدعوم</div>
            <div style="font-size: 14px; opacity: 0.7;">استخدم متصفح حديث مثل Chrome أو Firefox</div>
          `;
        }
      }, 300);
    }

    // Modal controls
    closeBtn.addEventListener("click", closeModal);
    playerModal.addEventListener("click", e => {
      if (e.target === playerModal) closeModal();
    });

    function closeModal() {
      if (hls) {
        hls.destroy();
        hls = null;
      }
      video.pause();
      playerModal.style.display = "none";
    }

    fullscreenBtn.addEventListener("click", () => {
      if (video.requestFullscreen) {
        video.requestFullscreen();
      } else if (video.webkitEnterFullscreen) {
        video.webkitEnterFullscreen();
      }
    });

    // Refresh functionality
    refreshBtn.addEventListener("click", () => {
      refreshBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> تحديث';
      setTimeout(() => {
        renderChannels();
        updateStats();
        refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> تحديث';
      }, 1000);
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && playerModal.style.display === 'flex') {
        closeModal();
      } else if (e.key === 'f' || e.key === 'F') {
        if (playerModal.style.display === 'flex') {
          fullscreenBtn.click();
        }
      }
    });

    // Initialize app
    updateStats();
    createFilterTabs();
    renderChannels();
  </script>
</body>
</html>